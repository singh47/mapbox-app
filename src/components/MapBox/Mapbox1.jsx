import * as React from "react";
import "./Mapbox1.scss";
import Map, { Source, Layer, NavigationControl } from "react-map-gl";
// import "mapbox-gl/dist/mapbox-gl.css";
// import { MAP_BOX_TOKEN } from "../../utils/constants";
import store from "../../store";
import { useSelector, connect } from "react-redux";


function MapboxDemo1 (props) {
   console.log("Bob the builder....");
   const MAP_BOX_TOKEN="pk.eyJ1IjoiZXJpY2tuMjMiLCJhIjoiY2w5ZWNhdnJ0NHRlbzN1bXg2amF0M3Z0ZyJ9.vKBBr7kcVq35_rLhMbfyQA"
   const geojson = {
    type : 'FeatureCollection',
    features: [
      {
        type: 'Feature',
        geometry: {
          type: 'Polygon',
          // These coordinates outline Maine.
          'coordinates': [
            props.long,
            ]
          }
        }
    ]
   }

   const layerStyle = {
    id: 'outline',
    type: 'line',
    source: 'maine',
    layout: {},
    paint: {
    'line-color': '#000',
    'line-width': 3
    }
   }

   const coordinates= "-113.75066003481459 54.15195190239163, -113.7506600767892 54.15213477634271, -113.75066015208704 54.155751040261805, -113.75065570660819 54.159371859295504, -113.75065116935669 54.162988191256495, -113.75064674376642 54.16660899324267, -113.75064680642848 54.170225321815785, -113.75064666619393 54.173846098347866, -113.75064220961869 54.17746688734246, -113.75064224277975 54.18108320207707, -113.75064232446132 54.18126604865482, -113.75064231586654 54.18489128795211, -113.75064229597173 54.18852102492479, -113.75063782812067 54.192128382286526, -113.75063341694121 54.19574030987974, -113.75062889610942 54.19936108024215, -113.75062447605298 54.20297740869318, -113.75062443616301 54.20659820074195, -113.75061995250253 54.2102190306712, -113.7506200344979 54.21039735523636, -113.75061996541388 54.213170900638566, -113.75062001402664 54.214018137798085, -113.75061554888062 54.21763895815772, -113.75061115549926 54.22125975638982, -113.75060667102586 54.22487606289807, -113.75060656908848 54.22849683395153, -113.75060214432159 54.23211761684205, -113.75061557142948 54.23572954471429, -113.75062888179002 54.239341401049685, -113.75031679560031 54.23934134215359, -113.74412748578844 54.239332494751565, -113.7379338983847 54.23932358434282, -113.73174014575844 54.2393101320666, -113.72555083503524 54.239301245417685, -113.72523882009334 54.2393012794298, -113.71906299883517 54.23928790374021, -113.71288708355912 54.2392789809883, -113.70671566049911 54.23926560861719, -113.70054426522424 54.23925666401331, -113.70023664753623 54.23925668528053, -113.69406520018408 54.239256671003766, -113.68789384899448 54.23925223987365, -113.68172232819613 54.23925218829796, -113.6755465408834 54.239252247043694, -113.67523885604295 54.23925221456765, -113.66906750697224 54.239247731695656, -113.66289612302332 54.23924777649974, -113.65672018526547 54.23924331183788, -113.65054882543248 54.23923879676749, -113.65024121044695 54.23923885864521, -113.64406524244184 54.23923883259571, -113.63788950099297 54.23923436331664, -113.6317180896729 54.239229895833006, -113.6255422230519 54.23922548795855, -113.62523447279605 54.23922542192929, -113.61906309635054 54.23922546774713, -113.61288729690428 54.23922097624113, -113.60671584810876 54.239220984285524, -113.60054443827138 54.239216501130436, -113.60054452107428 54.23560462737887, -113.6005444778555 54.23198835948409, -113.6005490218977 54.22837201591579, -113.60054893305906 54.22475565413206, -113.60055337524402 54.22113931651255, -113.60055335661151 54.217518513871596, -113.600557888704 54.21390223110163, -113.60055791329395 54.21028590467556, -113.60055779596975 54.21010304860665, -113.60055789195681 54.20648670871605, -113.60055340610663 54.202865930435834, -113.60055340200539 54.199249597290674, -113.60055339493758 54.19562884751797, -113.60055341380871 54.19201249573689, -113.60055340348303 54.188400641004776, -113.60055344539899 54.18478427036371, -113.60055338184108 54.181168002919385, -113.60055344925138 54.18098958686211, -113.60055338889192 54.177373232125255, -113.60055785359681 54.17375690235096, -113.60056226720366 54.17014057630488, -113.60056237028412 54.166524255585465, -113.6005668055248 54.16290791155645, -113.60056680774143 54.15929159851966, -113.60056675976541 54.15567528939466, -113.60057116600105 54.15205893156941, -113.60057119699847 54.15187609460573, -113.60674706209065 54.151885014415754, -113.61291848636691 54.15189399130333, -113.61909433202439 54.151898453359344, -113.62526574638169 54.151907290788486, -113.62557788944513 54.15190736560226, -113.631758133316 54.151911812861954, -113.63794297156714 54.15192070030203, -113.64412321844165 54.15192517952949, -113.65030803391872 54.15192960710649, -113.65061572886577 54.15192965603962, -113.65679154083192 54.15193410325405, -113.66296296366342 54.15193851030373, -113.6691433512548 54.15194300937632, -113.67531922632499 54.151947493944164, -113.67562685475718 54.15194748891987, -113.68180715797875 54.151947435839936, -113.68798743112036 54.15195190291876, -113.69415880698348 54.151956387733215, -113.70033021057063 54.15195638596497, -113.70063796401406 54.15195637527174, -113.70681377104428 54.151956426118495, -113.71298511708201 54.15195636522018, -113.71916104472027 54.151956424256106, -113.72533689584674 54.15195633937417, -113.72564452752593 54.151956374437795, -113.73182485164827 54.15195641440641, -113.73800078263221 54.151956417153635, -113.7441765820394 54.15195637569182, -113.7503524700814 54.151951921209104, -113.75066003481459 54.15195190239163"
   
   const addLayer ={
      id: 'maine',
      type: 'fill',
      source: 'maine',// reference the data source
      layout: {},
      paint: {
      'fill-color': '#0080ff', // blue color fill
      'fill-opacity': 0.5
      }
    }

  // store.subscribe(() => {
  //   console.log("CHAAHHAHAHAHHHAa");
  //   console.log(store.getState());
  // });

  //const long = useSelector(state => store.getState());

  console.log(props.long, "LONG HERE PROPS")

  return (
    <Map
      initialViewState={{
        longitude: -106,
        latitude: 52,
        zoom: 5.40,
      }}
      style={{ width: "100%", height: "100vh" }}
      mapStyle="mapbox://styles/erickn23/cl9f0c0go001f14p7ct0oqbqt"
      mapboxAccessToken={MAP_BOX_TOKEN}
      type ="geojson"
      data={{
      type: 'Feature',
      geometry: {
        type: 'Polygon',
        // These coordinates outline Maine.
        'coordinates': 
        []
        }
      }}

      paint = {{
        line_color: '#000',
        line_width: 3
        }}

    >
      <Source id= "my-data" type="geojson" data={geojson}>
        <Layer {...addLayer} />
      </Source>
      <NavigationControl />
    </Map>
  );
}

const mapStateToProps = (store) => {
  console.log(store, "SSSSS");
  return {
    long: store
  }
}

export default connect(mapStateToProps)(MapboxDemo1);
